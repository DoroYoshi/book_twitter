<div class="col-md-10 offset-md-1 mt-5">
  <div class="row">
    <div class="col-md-4 mb-4">
      <%= show_book_image @book %>
    </div>
    <div class="col-md-8">
      <h2><%= @book.title %></h2>
      
      <%= render partial: "reviews/review", collection: @book.review %>
    </div>
  </div>
  <%= link_to t(".edit"), edit_book_path(@book), class: "btn btn-primary" %>
  <%= button_tag t(".delete"), class: "btn btn-warning", data: { toggle: "modal", target: "#delete-book" } %>
  <% if user_signed_in? %>
    <%= link_to t(".review_new"), new_book_review_path(@book), class: "btn btn-info" %>
  <% end %>

  <% @reviews.each do |review| %>
    <% if current_user.favrev?(review) %>
      <%= form_for(current_user.favorites.find_by(review_id: review.id), html: { method: :delete }) do |f| %>
        <%= hidden_field_tag :review_id, review.id %>
        <%= f.submit t(".favorite_out"), class: 'btn btn-danger' %>
      <% end %>
    <% else %>
      <%= form_for(current_user.favorites.build) do |f| %>
        <%= hidden_field_tag :review_id, review.id %>
        <%= f.submit t(".favorite"), class: 'btn btn-success' %>
      <% end %>
    <% end %>
    <%= link_to t(".return"), books_path(@book), class: "btn btn-secondary" %>
    <hr>
  <% end %>
</div>
<%# deleteのmodal %>
<div class="modal fade" id="delete-book">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel"><%= t(".modal_title") %></h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p><%= t(".question_book", book: @book.title) %></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal"><%= t(".cancel") %></button>
        <%= link_to t(".delete_action"), book_path(@book), method: :delete, class: "btn btn-danger" %>
      </div>
    </div>
  </div>
</div>
<%# favoriteのmodal %>
<div class="modal fade" id="favorite-book">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel"><%= t(".favorite_title") %></h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p><%= t(".favorite_book", book: @book.title) %></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal"><%= t(".cancel") %></button>
        <%= link_to t(".favorite_action"), book_path(@book), class: "btn btn-success" %>
      </div>
    </div>
  </div>
</div>

  <%# カテゴリー %>
  <%# <ul> %>
    <%# <li><b>価格: </b><%= number_with_delimiter @book.price %>
    <%# <li><b>読了日: </b><%= @book.finished_date %>
  <%# </ul> %>
  <%# <h4>3つの学び</h4> %>
  <%# <ul> %>
    <%# <li><b>読了日: </b><%= @book.finished_date %>
    <%# <li><b>読了日: </b><%= @book.finished_date %>
    <%# <li><b>読了日: </b><%= @book.finished_date %>
  <%# </ul> %>
  <%# <hr> %>
  <%# <h4>140字まとめ</h4> %>
  <%# <%= simple_format @book.description %>